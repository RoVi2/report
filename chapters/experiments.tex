%!TEX root = ../report.tex
\chapter{Experiments}
\label{cha:experiments}
In order to verify the theory and method whose implementation is described in the previous chapters, a number of experiments are performed.

The experiments are designed to verify or examine the following properties of the system:
\begin{itemize}
    \item The ``true'' PA10 joint configuration versus the desired configuration.
    \item Correctness of the estimated object 3D position obtained by triangulation. %todo
    \item The error between the detected object 3D position and the Kalman filter prediction.
    \item Paths planned around obstacles in the environment.
\end{itemize}


\section{Joint positional error}
The first experiment to be carried out is to explore whether the PA10 correctly reaches the desired configurations.
Variation between the true (as reported by the PA10 controller) and desired configurations can easily affect other parts of the system.

The experiment is performed by sending a number of desired joint configurations to the PA10 controller and afterwards reading back the resulting configuration as reported by the controller node. Figure \ref{fig:q_real_desired} shows the resulting data.

\begin{figure}[htb]
    \centering
    \resizebox{\columnwidth}{!}{%
        \input{figures/q_real_desired_tikz}
    }
    \caption{Real configuration as reported by the PA10 controller versus the desired configuration for the first 3 joints.}
    \label{fig:q_real_desired}
\end{figure}

In an optimal system the true and desired configurations should be the same, but here the results show otherwise.
Sometimes the robot does not adhere to the configuration sent to it, but stops after moving a little bit of the way.

Some small part of the error might be explained by mechanical joint play, but at times the variation is too large to be only that.
At the time of writing, the reason for the joint positional error is still undetermined.

% Variation between the true and desired configuration might be caused by mechanical play of a particular joint.
% The play will have to be larger than the encoder resolution to be detected and thus significant.


\section{Precision of object detection}
Backprojection?


\section{Detected ball position and the Kalman filter prediction}
To show that the Kalman filter is working as expected,
predicting the ball position even in cases where the detection algorithm fails, the following experiment is conducted.

The PA10 robot configuration and thus the stereo camera position is kept constant.
The object to be tracked is then moved slowly inside the view of the cameras. At some point, the object is obscured by moving it behind a piece of cardboard, so that the tracking algorithm no longer succeeds in detecting it.
That is the point at which the Kalman filter predictions become particularly important to keep track of the object. Especially so in cases where the object would have otherwise moved out of sight of the cameras while obscured.



\begin{figure}
    \centering
    \begin{subfigure}[b]{0.49\textwidth}
        \resizebox{\columnwidth}{!}{%
        \input{figures/ball_kalman_3d_tikz}
        }
        \caption{A}
        \label{fig:ball_kalman_3d}
    \end{subfigure}~
    \begin{subfigure}[b]{0.49\textwidth}
        \resizebox{\columnwidth}{!}{%
            \input{figures/ball_kalman_error_tikz}
        }
        \caption{B}
        \label{fig:ball_kalman_error}
    \end{subfigure}
    \caption{Kalman}
    \label{fig:kalman_test}
\end{figure}

% \begin{figure}[htb]
%     \centering
%     \resizebox{\columnwidth}{!}{%
%         \input{figures/ball_kalman_3d_tikz}
%     }
%     \caption{Kalman.}
%     \label{fig:ball_kalman_3d}
% \end{figure}

% \begin{figure}[htb]
%     \centering
%     \resizebox{\columnwidth}{!}{%
%         \input{figures/ball_kalman_error_tikz}
%     }
%     \caption{Err.}
%     \label{fig:ball_kalman_error_tikz}
% \end{figure}

\section{Paths planning around obstacles}
Simulation only
